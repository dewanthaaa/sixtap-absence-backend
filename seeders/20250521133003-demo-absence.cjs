"use strict";

/** @type {import('sequelize-cli').Seeder} */
module.exports = {
  up: async (queryInterface, Sequelize) => {
    const users = await queryInterface.sequelize.query(
      `SELECT id, schoolclass_id FROM users WHERE id BETWEEN 13 AND 30;`,
      {
        type: Sequelize.QueryTypes.SELECT,
      }
    );

    // Buat mapping user_id -> schoolclass_id
    const userClassMap = {};
    users.forEach((user) => {
      userClassMap[user.id] = user.schoolclass_id;
    });

    await queryInterface.bulkInsert(
      "absences",
      [
        {
          user_id: 13,
          rfid_card_id: 1,
          schoolclass_id: userClassMap[13], //ini saya mau schoolclass_id nya ngambil dari data user berdasarkan user_id diatas
          day: "Monday",
          time_in: new Date("2025-01-15 06:05:00"), // Format Date object
          time_out: new Date("2025-01-15 14:45:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 14,
          rfid_card_id: 2,
          schoolclass_id: userClassMap[14],
          day: "Tuesday",
          time_in: new Date("2025-01-16 06:00:00"), // Format string ISO
          time_out: new Date("2025-01-16 14:30:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 15,
          rfid_card_id: 3,
          schoolclass_id: userClassMap[15],
          day: "Wednesday",
          time_in: new Date("2025-01-16 06:00:00"), // Dengan timezone
          time_out: new Date("2025-01-16 14:35:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 16,
          rfid_card_id: 4,
          schoolclass_id: userClassMap[16],
          day: "Thursday",
          time_in: new Date("2025-04-02T06:11:00"),
          time_out: new Date("2025-04-02T14:39:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 17,
          rfid_card_id: 5,
          schoolclass_id: userClassMap[17],
          day: "Friday",
          time_in: new Date("2025-04-06T06:00:00"),
          time_out: new Date("2025-04-06T14:45:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 18,
          rfid_card_id: 6,
          schoolclass_id: userClassMap[18],
          day: "Monday",
          time_in: new Date("2025-01-09T06:28:00"),
          time_out: new Date("2025-01-09T14:30:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 19,
          rfid_card_id: 7,
          schoolclass_id: userClassMap[19],
          day: "Tuesday",
          time_in: new Date("2025-02-13T06:06:00"),
          time_out: new Date("2025-02-13T14:32:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 20,
          rfid_card_id: 8,
          schoolclass_id: userClassMap[20],
          day: "Wednesday",
          time_in: new Date("2025-02-18T06:16:00"),
          time_out: new Date("2025-02-18T14:37:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 21,
          rfid_card_id: 9,
          schoolclass_id: userClassMap[21],
          day: "Thursday",
          time_in: new Date("2025-05-03T06:13:00"),
          time_out: new Date("2025-05-03T14:55:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 22,
          rfid_card_id: 10,
          schoolclass_id: userClassMap[22],
          day: "Friday",
          time_in: new Date("2025-04-12T06:00:00"),
          time_out: new Date("2025-04-12T14:44:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 23,
          rfid_card_id: 11,
          schoolclass_id: userClassMap[23],
          day: "Monday",
          time_in: new Date("2025-01-19T06:26:00"),
          time_out: new Date("2025-01-19T14:34:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 24,
          rfid_card_id: 12,
          schoolclass_id: userClassMap[24],
          day: "Tuesday",
          time_in: new Date("2025-02-15T06:21:00"),
          time_out: new Date("2025-02-15T14:35:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 25,
          rfid_card_id: 13,
          schoolclass_id: userClassMap[25],
          day: "Wednesday",
          time_in: new Date("2025-04-17T06:17:00"),
          time_out: new Date("2025-04-17T14:55:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 26,
          rfid_card_id: 14,
          schoolclass_id: userClassMap[26],
          day: "Thursday",
          time_in: new Date("2025-02-28T06:02:00"),
          time_out: new Date("2025-02-28T14:52:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 27,
          rfid_card_id: 15,
          schoolclass_id: userClassMap[27],
          day: "Friday",
          time_in: new Date("2025-05-09T06:28:00"),
          time_out: new Date("2025-05-09T14:38:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 28,
          rfid_card_id: 16,
          schoolclass_id: userClassMap[28],
          day: "Monday",
          time_in: new Date("2025-05-01T06:07:00"),
          time_out: new Date("2025-05-01T14:34:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 29,
          rfid_card_id: 17,
          schoolclass_id: userClassMap[29],
          day: "Tuesday",
          time_in: new Date("2025-03-20T06:16:00"),
          time_out: new Date("2025-03-20T14:30:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
        {
          user_id: 30,
          rfid_card_id: 18,
          schoolclass_id: userClassMap[30],
          day: "Wednesday",
          time_in: new Date("2025-03-17T06:12:00"),
          time_out: new Date("2025-03-17T14:41:00"),
          date: new Date(),
          absence_status: "hadir",
          card_status: "approved",
          info: "Tepat Waktu",
          created_at: new Date(),
          updated_at: new Date(),
        },
      ],
      {}
    );
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete("absences", null, {});
  },
};
